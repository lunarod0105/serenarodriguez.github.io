<html>
	<head>
		<meta charset="utf-8">
		<meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">

		<title>Weekly Assignment 12</title>

		<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/reveal.js/4.1.0/reset.min.css">
		<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/reveal.js/4.1.0/reveal.min.css">
		<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/reveal.js/4.1.0/theme/solarized.min.css" id="theme">

		<!-- Theme used for syntax highlighted code -->
		<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/reveal.js/4.1.0/plugin/highlight/monokai.min.css" id="highlight-theme">

		<!-- Vega links -->
		<script src="https://cdn.jsdelivr.net/npm/vega@5"></script>
		<script src="https://cdn.jsdelivr.net/npm/vega-lite@5"></script>
		<script src="https://cdn.jsdelivr.net/npm/vega-embed@6"></script>

	</head>
	<body>
		<div class="reveal">
			<div class="slides">
				<section>
					<h2>Weekly Assignment 12</h2>
					<h3>INFO 3402</h3>
					<p>Serena Rodriguez</p>
				</section>

				<section>
					<img src="https://media.giphy.com/media/J5RB7fLysOoUY5E7Kf/giphy.gif">
				</section>

				<section>
					<p>Here is a code block with the basic code you will need to start off with when putting Vega visualizations into Reveal.js.</p>
						<pre><code data-trim class="js" data-line-numbers=3-7|4-6|8-15|><script type="text/template">
							<!DOCTYPE html>
							<html>
							<head>
								<script src="https://cdn.jsdelivr.net/npm/vega@3">< /script>
								<script src="https://cdn.jsdelivr.net/npm/vega-lite@2">< /script>
								<script src="https://cdn.jsdelivr.net/npm/vega-embed@3">< /script>
							</head>
							<body>
								<div id="vis"></div>
								<script type="text/javascript">
									var spec = {};  /* JSON dump of your chart's spec */
									var opt = {"renderer": "canvas", "actions": false};  /* Options for the embedding */
									vegaEmbed("#vis", spec, opt);
								< /script>
							</body>
							</html>
						</script></code></pre>
						<p>A minimal HTML file generated by Altair includes the above code</p>
				</section>

				<section>
					<p>When adding a visual into your Reveal.js, you will fill in the variable specs with your chart data and specifications</p>
						<pre><code data-trim class='js' data-line-numbers=1-7|3>
									< div id="vis"></ div>
									< script type="text/javascript">
										var spec = {};  /* JSON dump of your chart's spec */
										var opt = {"renderer": "canvas", "actions": false};  /* Options for the embedding */
										vegaEmbed("#vis", spec, opt);
									< /script>
						</code></pre>
				</section>

				<section>
					<p>When using vega datasets, make sure to update the data URL with the URL you are pulling data from.</p>
					<pre><code data-trim class='js' data-line-numbers=1-3|2>
							"data": {
						    		"url": "https://vega.github.io/vega-datasets/data/cars.json"
						  },
						</code></pre>
				</section>

				<section>
					<p>For the next two visuals, we will be using <a href="https://github.com/vega/vega-datasets/blob/master/data/disasters.csv"> disasters.csv </a> from <a href="https://github.com/vega/vega-datasets">vega-datasets</a></p>
				</section>

				<section>
					<p>The code for using this data will look like this</p>
					<pre><code data-trim class='js' data-line-numbers=2>
							"data": {
						    		"url": "https://vega.github.io/vega-datasets/data/disasters.csv"
						  },
						</code></pre>
				</section>

				<section>
					<h2>Visualization One</h2>
					<h3>Bar Chart</h3>
					<p>Change colors, fonts, and font size</p>
				</section>

				<section>
					<!--Vega visualization goes here-->
					<div id="vis01-bars"></div>
						
						<script type="text/javascript">
						var spec = {
							"$schema": "https://vega.github.io/schema/vega-lite/v5.json",
							"width": 900,
							"height": 600,
							"config":{
								"font":"Times New Roman"
							},
							"data": {
								"url": "https://vega.github.io/vega-datasets/data/seattle-weather.csv"
							},
							"mark": {
								"type":"bar",
								"color":"blue"
							},
							"encoding": {
								"x": {
									"field": "date",
									"type": "quantitative",
									"title": "Date",
									"axis": {
										"titleFontSize": 20
									}
								},
								"y": {
									"field": "temp_max",
									"type": "quantitative",
									"title": "Max temperature",
									"axis": {
										"titleFontSize": 20
									}
								}
							}
						};
						var opt = {"renderer": "canvas", "actions": false};
						vegaEmbed("#vis01-bars", spec, opt);
						</script>
				</section>

				<section>
					<h3>Interpretation</h3>
					<p>The year that had the most deaths from natural disasters was in 1931. Since then the number of deaths caused by natural disasters has decreased. Something important to note is the dataset only has data up to 2017, so deaths could have increased in the last four years.</p>
				</section>

				<section>

					<section>
						<h2>How to make aesthetic changes</h2>
						<ol style="text-align: center;">
							<li>Mark colors</li>
							<li>Font size</li>
							<li>Font</li>
						</ol>
					</section>

					<section>
						<h2>Changing the color of the marks</h2>
						<p>In this case they were bars</p>
							<pre><code data-trim class='js' data-line-numbers=3-6>
							{
									...
									"mark": {
											"type": "bar",
											"color": "red"
								},
								...
							};
							</code></pre>
					</section>

					<section>
						<h2>Changing font size</h2>
						<pre><code data-trim class='js' data-line-numbers=3,6-8>
							{	
								...
								"encoding": {
										"y": {
											"aggregate": "count", 
											"title": "Number of Deaths",
											"axis":{
												"labelColor": "red",
												"labelFontSize": 20
								...
							}	
						</code></pre>
					</section>

					<section>
						<h2>Changing the font</h2>
						<pre><code data-trim class='js' data-line-numbers=5-7>
							{
								...
								"width": "900",
								"height": 600,
								"config": {
										"font":"Times New Roman"
								},
								...
							};
						</code></pre>
					</section>
				</section>	

				<section>
					<h2>Visualization Two</h2>
					<h3>Horizontal Bar Chart</h3>
					<p>Use composition in some way. I will be using layering.</p>
				</section>

				<section>
					<!--Vega visualization goes here-->
					<div id="disasters02" style="center"></div>
						
						<script type="text/javascript">
						var spec = {

							"$schema": "https://vega.github.io/schema/vega-lite/v5.json",
							"width": 600,
							"height": 400,
							"data": {
							    "url": "https://vega.github.io/vega-datasets/data/disasters.csv"
							},
							"encoding": {
							    "x": {
							        "aggregate": "sum",
							        "field": "Deaths",
							        "title": "Number of Deaths",
							        "type": "quantitative",
							        "scale": {"type": "log"},
							        "axis": {"tickCount": 5}
							    },
							    "y": {
							        "field": "Entity",
							        "type": "nominal",
							        "sort": "-x"
							    },
							    "color": {
							        "field": "Entity",
							       "type": "nominal"
							    }
							},
							"layer":[{
							    "mark": "bar"
							},{
							    "mark": {
							        "type": "text",
							        "align": "left",
							        "baseline": "middle",
							        "dx": 5
							    },
							    "encoding": {
							        "text": {
							            "aggregate": "sum",
							            "field": "Deaths",
							            "type": "quantitative",
							            "format": ",.0f"
							        }
							    }
							}]
						};
						var opt = {"renderer": "canvas", "actions": false};
						vegaEmbed("#disasters02", spec, opt);
						</script>
				</section>

				<section>
					<h3>Interpretation</h3>
					<p>One of the categories of natural disasters is "All Natural Disasters". I am assuming this is all deaths from natural disasters, and will be disreagrding this bar in my interpretation of the chart.</p>
					<p>We can see that drought, epidemics, and floods have the most deaths when it comes to which natural disasteer kills the most people. I think once this dataset starts to include 2019,2020, and 2021 we will see the epidemic bar grow.</p>
				</section>

				<section>
					<section>
						<h2>How to add layers</h2>
						<p>Define your X and Y encoding channels</p>
						<pre><code data-trim class='js' data-line-numbers=1-10|2-6|7-10>
							"encoding": {
								"x": {
									"field": "Deaths", 
									"title": "Number of Deaths",
									"type": "quantitative"
								},
								"y": {
									"field": "Entity",
									"type": "nominal"
								},
								"color": {
									"field": "Entity",
									"type": "nominal"
								}
							},
							"layer":[{
								"mark": "bar"
							},{
								"mark": {
									"type": "text",
									"align": "right",
									"baseline": "line-top",
									"dx": 700
								},
								"encoding": {
									"text": {
										//"aggregate": "count",
										"field": "Deaths",
										"type": "quantitative"
									}
								}
						</code></pre>
					</section>	
				

					<section>
							<h2>How to add layers</h2>
							<p>Then add your layering fields</p>
							<pre><code data-trim class='js' data-line-numbers=16-31>
								"encoding": {
									"x": {
										"field": "Deaths", 
										"title": "Number of Deaths",
										"type": "quantitative"
									},
									"y": {
										"field": "Entity",
										"type": "nominal"
									},
									"color": {
										"field": "Entity",
										"type": "nominal"
									}
								},
								"layer":[{
									"mark": "bar"
								},{
									"mark": {
										"type": "text",
										"align": "right",
										"baseline": "line-top",
										"dx": 700
									},
									"encoding": {
										"text": {
											//"aggregate": "count",
											"field": "Deaths",
											"type": "quantitative"
										}
									}
							</code></pre>	
					</section>

					<section>
							<h2>How to add layers</h2>
							<p>Define what mark your visual will have</p>
							<p>Then define the next mark, which are the specifications for your text annoations.</p>
							<pre><code data-trim class='js' data-line-numbers=16-17|18-24>
								"encoding": {
									"x": {
										"field": "Deaths", 
										"title": "Number of Deaths",
										"type": "quantitative"
									},
									"y": {
										"field": "Entity",
										"type": "nominal"
									},
									"color": {
										"field": "Entity",
										"type": "nominal"
									}
								},
								"layer":[{
									"mark": "bar"
								},{
									"mark": {
										"type": "text",
										"align": "right",
										"baseline": "line-top",
										"dx": 700
									},
									"encoding": {
										"text": {
											//"aggregate": "count",
											"field": "Deaths",
											"type": "quantitative"
										}
									}
							</code></pre>	
					</section>

					<section>
							<h2>How to add layers</h2>
							<p>Lastly, "encoding" defines where the text will show up on the visual.</p>
							<pre><code data-trim class='js' data-line-numbers=25-31>
								"encoding": {
									"x": {
										"field": "Deaths", 
										"title": "Number of Deaths",
										"type": "quantitative"
									},
									"y": {
										"field": "Entity",
										"type": "nominal"
									},
									"color": {
										"field": "Entity",
										"type": "nominal"
									}
								},
								"layer":[{
									"mark": "bar"
								},{
									"mark": {
										"type": "text",
										"align": "right",
										"baseline": "line-top",
										"dx": 700
									},
									"encoding": {
										"text": {
											//"aggregate": "count",
											"field": "Deaths",
											"type": "quantitative"
										}
									}
							</code></pre>	
					</section>
				</section>	

				<section>
					<h3>And that's how you customize</h3>
					<img src="https://media.giphy.com/media/CVbWtbB9ri1VPS2ViN/giphy.gif">
					<h3>Vega visualizations in Reveal.js</h3>
				</section>

				
			</div>
		</div>

		<script src="https://cdnjs.cloudflare.com/ajax/libs/reveal.js/4.1.0/reveal.js"></script>
		<script src="https://cdnjs.cloudflare.com/ajax/libs/reveal.js/4.1.0/plugin/highlight/highlight.min.js"></script>
		<script>
			// More info about initialization & config:
			// - https://revealjs.com/initialization/
			// - https://revealjs.com/config/
			Reveal.initialize({
				hash: true,
				slideNumber: 'c/t',
				// Learn about plugins: https://revealjs.com/plugins/
				plugins: [ RevealHighlight ]
			});
		</script>
	</body>
</html>